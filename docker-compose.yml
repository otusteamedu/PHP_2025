services:

  app1:
    build:
      context: ./docker/app
      dockerfile: Dockerfile
    volumes:
      - ".:/var/www/html"
    networks:
      - projectNetwork

  app2:
    build:
      context: ./docker/app
      dockerfile: Dockerfile
    volumes:
      - ".:/var/www/html"
    networks:
      - projectNetwork

  nginx:
    build:
      context: ./docker/nginx
      dockerfile: Dockerfile
    ports:
      - "${NGINX_PORT}:80"
    volumes:
      - "./:/var/www/html"
    networks:
      - projectNetwork

  redis:
    image: "redis:latest"
    volumes:
      - "./docker/redis/d–∞ta:/root/redis"
    command: "/bin/sh -c \"redis-server --requirepass ${REDIS_PASSWORD}\""
    environment:
      - "REDIS_PASSWORD=${REDIS_PASSWORD}"
      - "REDIS_PORT=6379"
      - "REDIS_DATABASES=${REDIS_DATABASES}"
    networks:
      - projectNetwork

networks:
  projectNetwork:
    driver: bridge