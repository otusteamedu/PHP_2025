# PHP_2025

https://otus.ru/lessons/razrabotchik-php/?utm_source=github&utm_medium=free&utm_campaign=otus

## Домашнее задание к уроку 13. Другие SQL-решения

- реализуем поиск по книжному интернет-магазину с помощью Elasticsearch
- у каждого товара есть название, категория, цена и кол-во остатков на складе
- поиск должен корректно работать с опечатками и русской морфологией
- пример: пользователь ищет все исторические романы дешевле 2000 рублей (и в наличии) по поисковому запросу "рыцОри"
- в результате должны вернуться товары, ранжированные по релевантности
- домашку нужно сдать как консольное PHP-приложение, которое принимает один или несколько параметров командной строки и
  выводит результат в виде текстовой таблички, после чего завершает работу
- JSON с товарами будет приложен к занятию в ЛК
- способ создания индекса и его первоначального заполнения — на ваш выбор

### Инициализация хранилища:

```
php app.php storage/init --filePath=./data/books.json
```

**или:**

```
php app.php storage/create
php app.php storage/seed --filePath=./data/books.json
```

### Удаление хранилища:

```
php app.php storage/delete
```

### Запрос данных:

```
php app.php search --title=рыцорь --category="Исторический роман" --price_min=2000 --price_max=4000 --stock_shop=Мира --stock_min=15
```

### Пример ответа:

```
Найдено книг: 8
+---------+--------------------------------------------------+------+--------------------+----------------------+
| Артикул | Название                                         | Цена | Категория          | Наличие              |
+---------+--------------------------------------------------+------+--------------------+----------------------+
| 501-491 | Что делали рыцари рептилоидов на Луне            | 3257 | Исторический роман | Мира: 20; Ленина: 18 |
| 506-586 | Что делали рыцари рептилоидов под кроватью       | 3897 | Исторический роман | Мира: 19; Ленина: 20 |
| 507-376 | Что делали рыцари рептилоидов под кроватью       | 3938 | Исторический роман | Мира: 19; Ленина: 6  |
| 508-831 | Что делали рыцари Терминатора по ночам           | 3289 | Исторический роман | Мира: 15; Ленина: 9  |
| 509-625 | Что делали рыцари Штирлица в Москве              | 2299 | Исторический роман | Мира: 17; Ленина: 13 |
| 501-179 | Что делали рыцари Джона Сноу по ночам            | 3230 | Исторический роман | Мира: 15; Ленина: 7  |
| 502-015 | Что делали рыцари Штирлица в домашних условиях   | 2030 | Исторический роман | Мира: 19; Ленина: 15 |
| 505-223 | Что делали рыцари Джона Сноу в домашних условиях | 2927 | Исторический роман | Мира: 19; Ленина: 1  |
+---------+--------------------------------------------------+------+--------------------+----------------------+
```
