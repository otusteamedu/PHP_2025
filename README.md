# PHP_2025

Домашняя работа по лекции 13 Другие SQL-решения

ElasticSearch

Описание/Пошаговая инструкция выполнения домашнего задания:
- реализуем поиск по книжному интернет-магазину с помощью Elasticsearch
- у каждого товара есть название, категория, цена и кол-во остатков на складе
- поиск должен корректно работать с опечатками и русской морфологией
- пример: пользователь ищет все исторические романы дешевле 2000 рублей (и в наличии) по поисковому запросу "рыцОри"
- в результате должны вернуться товары, ранжированные по релевантности
- домашку нужно сдать как консольное PHP-приложение, которое принимает один или несколько параметров командной строки и выводит результат в виде текстовой таблички, после чего завершает работу
- JSON с товарами будет приложен к занятию в ЛК
- способ создания индекса и его первоначального заполнения — на ваш выбор

Критерии оценки:
- Работа c ES при помощи готовых библиотек
- Выделен слой кода, отвечающий за работу с хранилищем.


Примеры команд
php shop.php index                                  //индексация из файла dist/books.json
php shop.php index books.json                       //индексация из произвольного bulk-файла
php shop.php search 'рыцОри'                        //поиск по заголовку
php shop.php search "под" 2000                      //поиск по заголовку с фильтром по цене
php shop.php search "под" 2000 "Исторический роман" //поиск по заголовку с фильтром по цене и по категории  


Структура проекта:
composer.json
docker-compose.yml
vendor/
shop.php  // точка входа
src/
    App.php                                // координатор приложения
    Config.php                             // конфигурация приложения
    Loader/BookLoader.php                  // загружает книги из JSON файла
    Elasticsearch/ElasticsearchClient.php  // клиент для работы с ElasticSearch ("elasticsearch/elasticsearch": "^8.18")
    Repository/BookRepository.php          // репозиторий для работы с книгами (индексирование, поиск)
    Command/IndexBooksCommand.php          // команда: загрузка книг в Elastic
    Command/SearchBooksCommand.php         // команда: поиск книг и вывод в консоль
    Console/TableRenderer.php              // вывод результатов в виде таблицы в консоль
