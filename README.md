# PHP_2025

https://otus.ru/lessons/razrabotchik-php/?utm_source=github&utm_medium=free&utm_campaign=otus

## Домашнее задание к уроку 22. Design patterns. Часть 2

**Задача:**

Разработайте несложный REST API (только backend!) для новостного сайта.

**Сущность Новости:**

- название
- дата создания
- автор
- категория (например, "Политика" или "Спорт")
- текст (HTML)

**Методы API:**

- создать новость
- загрузить список новостей
- загрузить новость
- подписаться на новости по конкретной категории

**Паттерны проектирования:**

- используйте Строитель, чтобы пошагово построить объект Новости
- используйте Декоратор, чтобы добавить дополнительную информацию в HTML-код новости: "Время чтения: N минут" или "
  Поделиться: [ссылки на соцсети]"
- используйте Наблюдатель, чтобы можно было подписаться на новости по конкретной категории и получать сообщения в момент
  появления новых новостей

**Реализация:**

- можно взять готовый фреймворк (Symfony, Laravel, Yii...)
- но при этом нельзя брать готовые библиотеки для реализации паттернов (их нужно написать "руками")
- REST API должен работать с JSON; фронт-енд писать не нужно

## Инструкция по запуску

1. Скопировать файл `.env.example` в файл `.env` и прописать в нем необходимые параметры


2. Скопировать файл `app/.env` в файл `.env.dev.local` и прописать в нем необходимые параметры


3. Выполнить команду:

```
make init
```

4. Выполнить команду:

```
make migrations-install
```

## Инструкция по использованию

1. Создание новости.

```
curl --location 'http://localhost/api/v1/news' \
--header 'Content-Type: application/json' \
--data '{
    "title": "Sport news item",
    "author": "Mariia",
    "category": "Sport",
    "content": "<p>Sport news item content</p> <p>Lorem ipsum dolor sit amet consectetur adipiscing elit. Dolor sit amet consectetur adipiscing elit quisque faucibus.</p>"
}'
```

2. Просмотр новости. К тексту новости добавляется информация о времени чтения новости и блок со ссылками на соцсети.

```
curl --location 'http://localhost/api/v1/news/1'
```

3. Просмотр списка новостей. Из текста новости генерируется аннотация ограниченной длины без тегов. Поддерживается
   постраничная навигация (количество элементов на странице задается в переменных окружения).

```
curl --location 'http://localhost/api/v1/news'
```

4. Подписка на новости конкретной категории. При создании новости в этой категории в лог приложения пишется информация
   об отправленных подписчикам уведомлениях об этой новости.

```
curl --location 'http://localhost/api/v1/subscriptions' \
--header 'Content-Type: application/json' \
--data '{
    "category": "Sport",
    "email": "sport@test.local"
}'
```
