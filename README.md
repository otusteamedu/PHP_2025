# PHP_2025
## Домашнее задание ElasticSearch
## Описание/Пошаговая инструкция выполнения домашнего задания:
реализуем поиск по книжному интернет-магазину с помощью Elasticsearch
у каждого товара есть название, категория, цена и кол-во остатков на складе
поиск должен корректно работать с опечатками и русской морфологией
пример: пользователь ищет все исторические романы дешевле 2000 рублей (и в наличии) по поисковому запросу "рыцОри"
в результате должны вернуться товары, ранжированные по релевантности
домашку нужно сдать как консольное PHP-приложение, которое принимает один или несколько параметров командной строки и выводит результат в виде текстовой таблички, после чего завершает работу
JSON с товарами будет приложен к занятию в ЛК
способ создания индекса и его первоначального заполнения — на ваш выбор

### Критерии оценки:
Работа c ES при помощи готовых библиотек

Выделен слой кода, отвечающий за работу с хранилищем.

## ДЗ

1. Создание БД

команда
```bash
php app.php db/init --index=otus-shop

```
ответ
```
db created

```

2. Заполнение БД

команда
```bash
php app.php db/bulk-insert --index=otus-shop --filepath=/app/data/books.json

```
ответ
```
insert succeed

```

3. Поиск книг в БД

команда
```bash
php app.php db/search --page=2 --limit=10 --maxPrice=2000 --title='рыцОри' --category='Детектив' --inStock=true

```
ответ
```
Всего книг: 37, страница 1 из 4, на странице 10.
+----+--------------------------------------------+---------+-------+----------+----------+
| #  | Title                                      | Sku     | Price | Category | In stock |
+----+--------------------------------------------+---------+-------+----------+----------+
| 1  | Что делали рыцари Терминатора по ночам     | 500-491 | 298   | Детектив | 29       |
| 2  | Что делали рыцари Терминатора под кроватью | 501-749 | 1873  | Детектив | 16       |
| 3  | Что делали рыцари Довакина под мухой       | 503-600 | 1300  | Детектив | 11       |
| 4  | Что делали рыцари Довакина за границей     | 503-739 | 1657  | Детектив | 23       |
| 5  | Что делали рыцари Довакина за границей     | 504-390 | 1200  | Детектив | 19       |
| 6  | Что делали рыцари Довакина за границей     | 504-748 | 1751  | Детектив | 1        |
| 7  | Что делали рыцари Довакина под мухой       | 504-846 | 1145  | Детектив | 10       |
| 8  | Что делали рыцари рептилоидов под кроватью | 506-175 | 689   | Детектив | 24       |
| 9  | Что делали рыцари Штирлица в Москве        | 506-688 | 1404  | Детектив | 30       |
| 10 | Что делали рыцари Штирлица за границей     | 507-387 | 1926  | Детектив | 19       |
+----+--------------------------------------------+---------+-------+----------+----------+
```

4. Удаление БД

команда
```bash
php app.php db/delete --index=otus-shop

```
ответ
```
db deleted successfully

```

