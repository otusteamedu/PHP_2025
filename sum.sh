#!/bin/bash

# Проверка количества аргументов
if [ "$#" -ne 2 ]; then
    echo "Ошибка: Необходимо передать ровно два аргумента." >&2
    exit 1
fi

# Регулярное выражение для проверки числа (целого или вещественного, отрицательного или положительного)
regex='^-?[0-9]+([.][0-9]+)?$'

# Проверка первого аргумента
if ! [[ $1 =~ $regex ]]; then
    echo "Ошибка: Первый аргумент не является числом: $1" >&2
    exit 1
fi

# Проверка второго аргумента
if ! [[ $2 =~ $regex ]]; then
    echo "Ошибка: Второй аргумент не является числом: $2" >&2
    exit 1
fi

# Функция для сложения двух чисел (использует bc, если он есть, иначе awk)
calculate_sum() {
    local a="$1"
    local b="$2"

    if command -v bc &> /dev/null; then
        sum=$(echo "$a + $b" | bc)
    else
        sum=$(awk -v a="$a" -v b="$b" 'BEGIN { printf "%.10f\n", a + b }' | sed 's/0*$//;s/\.$//')
    fi

    echo "$sum"
}

# Вычисляем сумму
result=$(calculate_sum "$1" "$2")

# Вывод результата (убираем лишние нули и точки для целых чисел)
if [[ "$result" =~ \.0+$ ]]; then
    echo "Сумма: ${result%.*}"
else
    echo "Сумма: $result"
fi