1. Модульные тесты

1.1 Валидация JSON-объекта
Проверяется наличие и корректность текстовых полей: card_number, card_holder, card_expiration, cvv, order_number, sum. При нарушении правил — возврат ошибки с кодом 400 и соответствующим сообщением.

card_number
Недопустимая длина ≠ 16 → ошибка "Некорректный номер карты".

Наличие нецифровых символов → ошибка.

Ровно 16 цифр → валидно.

card_holder
Пустое значение → "Заполните имя владельца карты".

Более одного пробела или дефиса → "Некорректное имя".

Нет пробела или недостаточно латинских букв → ошибка.

Недопустимые символы → "Имя должно быть латиницей".

Имя и фамилия через пробел (возможно с одним дефисом) → валидно.

card_expiration
Пустое значение → "Заполните срок действия карты".

Не соответствует формату MM/YY → ошибка.

Месяц вне диапазона 01–12 → ошибка.

Дата в прошлом → "Срок действия истек".

Корректный формат и актуальная дата → валидно.

cvv
Длина ≠ 3 или нецифровые символы → "Некорректный CVV-код".

Ровно 3 цифры → валидно.

order_number
Пустое значение → "Заполните номер заказа".

Длина > 16 → "Слишком длинный номер".

Заказ не найден в БД → "Заказ не найден".

Заказ существует и длина в пределах → валидно.

sum
Не соответствует формату число,два_знака → "Некорректный формат".

Сумма не совпадает с заказом → "Некорректная сумма".

Формат и сумма корректны → валидно.

1.2 Тест метода setOrderIsPaid
Проверяется на тестовой БД: если номер заказа и сумма совпадают — метод возвращает true, иначе выбрасывает исключение.

2. Интеграционные тесты
 2.1 Связка «фронт-бэк»
 Проверка передачи данных: при ошибках — код 400 и сообщение, отображающееся у соответствующего поля на фронте.

2.2 Связка «бэк-сервис A»
Тестирование с имитацией сервиса A: проверка реакции на недоступность, неполные данные, корректность списания средств.

2.3 Связка «бэк-репозиторий»
При валидных данных — код 200 и сообщение об успешной оплате. При ошибках — соответствующее сообщение.

3. Системные тесты
Проверяется:

Доступность страницы оплаты.

Наличие формы.

Успешная оплата при валидных данных.

Ошибки при неверных данных: карта, заказ, недостаток средств.

Оптимизация тестирования
Для экономии — использовать тестовый шлюз/кассу, если он доступен у сервиса A.