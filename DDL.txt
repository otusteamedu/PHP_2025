CREATE TABLE movies (
    movie_id INT PRIMARY KEY AUTO_INCREMENT,
    title VARCHAR(255) NOT NULL    -- Название фильма
);

CREATE TABLE attribute_types (
    type_id INT PRIMARY KEY AUTO_INCREMENT,
    type_name VARCHAR(255) NOT NULL  -- Название типа атрибута, например, "рецензии", "премия"
);

CREATE TABLE attributes (
    attribute_id INT PRIMARY KEY AUTO_INCREMENT,
    type_id INT,                    -- Ссылка на тип атрибута
    attribute_name VARCHAR(255) NOT NULL,  -- Название атрибута, например, "Оскар", "Рецензия критика"
    FOREIGN KEY (type_id) REFERENCES attribute_types(type_id)
);

CREATE TABLE attribute_values (
    value_id INT PRIMARY KEY AUTO_INCREMENT,
    movie_id INT,                   -- Ссылка на фильм
    attribute_id INT,               -- Ссылка на атрибут
    value_text TEXT,                -- Для текстовых значений (например, рецензии)
    value_date DATE,                -- Для дат (например, премьера фильма)
    value_boolean BOOLEAN,          -- Для логических значений (например, премия)
    value_numeric DECIMAL(10, 2),   -- Для числовых значений (например, рейтинг)
    FOREIGN KEY (movie_id) REFERENCES movies(movie_id),
    FOREIGN KEY (attribute_id) REFERENCES attributes(attribute_id)
);

-- Индексы
CREATE INDEX idx_movie_id ON attribute_values(movie_id);
CREATE INDEX idx_attribute_id ON attribute_values(attribute_id);
CREATE INDEX idx_value_date ON attribute_values(value_date);


