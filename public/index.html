<!DOCTYPE html>
<html>

<body>
    <form id="reportForm">
        <input type="date" name="from" required>
        <input type="date" name="to" required>
        <input type="email" name="email" required>
        <input type="text" name="phone" required>
        <button type="submit">Отправить</button>
    </form>
    <div id="status">Ожидание отправки</div>
    <script>
        document.getElementById("reportForm").onsubmit = async function (e) {
            e.preventDefault();
            const formData = new FormData(this);

            const res = await fetch("submit.php", {
                method: "POST",
                body: formData
            });

            const result = await res.json();
            const requestId = result.requestId;

            document.getElementById("status").innerText = "Статус: заявка обрабатывается";

            // стартуем polling для обновления статуса безе перезагрузки
            const interval = setInterval(async () => {
                const res = await fetch("status.php?id=" + requestId);
                const data = await res.text();

                if (data === "done") {  //по завершении отключаем опрос
                    document.getElementById("status").innerText = "Заявка готова";
                    clearInterval(interval);
                }
            }, 1000); //опрос каждую секунду
        };
    </script>
</body>

</html>